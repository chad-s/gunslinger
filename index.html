<!doctype html>
<html>
   <head>
      <title>iphone Gyro Test</title>

      <style type="text/css">
      #stream {
         height: 100%;
         margin: 0px auto;
         display: block;
         margin-top: 20px;
      }
      </style>

   </head>

   <body>
      <script src="/socket.io/socket.io.js"></script>
      <script src="http://code.jquery.com/jquery-1.11.1.js"></script>

      <script>
         var socket = io.connect(window.location.hostname+':3000');
         var nIntervId;

         // Something to do with streaming image ???
         socket.on('liveStream', function(url) {
            $('#stream').attr('src', url);
         });

         // Call this on connect only
         $(function()
         {
            // Initialize image streaming
            socket.emit('startStream');
            $('.start').hide();  // ??????????

            // Set sendGyroData to call at 2 Hz
            nIntervId = setInterval(sendGyroData, 100);
         })

         // Send the gyro data to the server
         function sendGyroData()
         {
            socket.emit('fromclient', {alpha: alpha, beta: beta, gamma: gamma});
         }

         // Get gyro data when phone orientation changes
         window.ondeviceorientation = function(event)
         {
            alpha = event.alpha;
            beta = event.beta;
            gamma = event.gamma;
         }

      </script>

      <img src="" id="stream">

   </body>
</html>



